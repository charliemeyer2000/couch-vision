services:
  nav2-planner:
    build:
      context: .
      dockerfile: Dockerfile.nav2
    ports:
      - "8765:8765"
    volumes:
      - ./weights:/perception/weights
      - ../bags:/bags:ro
    environment:
      - GOOGLE_MAPS_API_KEY=${GOOGLE_MAPS_API_KEY:-}
    command: [
      "--bag", "/bags/${BAG_FILE:-walk_around_university_all_data.mcap}",
      "--playback-rate", "${PLAYBACK_RATE:-1.0}",
      "--dest-lat", "${DEST_LAT:-38.036830}",
      "--dest-lon", "${DEST_LON:--78.503577}",
      "--lookahead", "${LOOKAHEAD:-15.0}"
    ]
